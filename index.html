<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Game Launcher - GameHub</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
    /* ---------- Intro overlay styles ---------- */
    :root{
        --deep-purple:#4a148c;
        --dark:#1c1c1c;
    }
    html,body{height:100%;}
    body{
        margin:0;
        font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        background: var(--dark);
        overflow-x:hidden;
        -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
    }

    /* Fullscreen overlay */
    .intro-overlay{
        position:fixed;
        inset:0;
        display:flex;
        align-items:center;
        justify-content:center;
        z-index:9999;
        background: radial-gradient(1200px 600px at 10% 10%, rgba(74,20,140,0.65), transparent 20%),
                    radial-gradient(1000px 500px at 90% 90%, rgba(0,0,0,0.7), transparent 20%),
                    linear-gradient(135deg, #4a148c, #1c1c1c 70%);
        background-size:cover;
        background-blend-mode:overlay;
        transition:opacity 700ms ease, visibility 700ms;
        visibility:visible;
        opacity:1;
        -webkit-backdrop-filter: blur(2px);
        backdrop-filter: blur(2px);
        flex-direction:column;
    }

    .intro-hidden{
        opacity:0;
        visibility:hidden;
        pointer-events:none;
    }

    .intro-center{
        text-align:center;
        color: #fff;
        padding: 0 20px;
    }

    .intro-title{
        font-size: clamp(1.8rem, 6vw, 3.8rem);
        font-weight:800;
        letter-spacing:4px;
        text-transform:uppercase;
        margin-bottom:.6rem;
        opacity:0;
        transform:scale(.96);
        filter:drop-shadow(0 8px 30px rgba(0,0,0,0.6));
    }
    .intro-sub{
        font-size: clamp(0.9rem, 3.2vw, 1.2rem);
        font-weight:600;
        opacity:0;
        transform:translateY(18px);
    }

    /* Animations for reveal/fade */
    @keyframes introIn {
        0% { opacity:0; transform: translateY(6px) scale(.98) }
        30% { opacity:1; transform: translateY(0) scale(1) }
        100% { opacity:1; transform: translateY(0) scale(1) }
    }
    @keyframes introOut {
        0% { opacity:1; transform: scale(1) }
        100% { opacity:0; transform: scale(.98) translateY(-6px) }
    }

    /* small glow effect for the first title */
    .glow {
        color: #fff;
        text-shadow:
            0 0 8px rgba(255,255,255,0.12),
            0 0 20px rgba(128,216,255,0.06),
            0 0 40px rgba(142,36,170,0.18);
    }

    /* ---------- Main site styles (kept & polished) ---------- */
    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    *{box-sizing:border-box}
    .main-page {
        min-height: 100vh;
        background: linear-gradient(-45deg, #1c1c1c 0%, #4a148c 50%, #1c1c1c 100%);
        background-size: 400% 400%;
        animation: gradientShift 20s ease infinite;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        transition: opacity 400ms ease;
    }

    .welcome-text {
        font-size: clamp(1.4rem, 5vw, 2.5rem);
        font-weight: 800;
        color: white;
        text-align: center;
        margin-top: 18px;
        margin-bottom: 8px;
        letter-spacing: 3px;
        text-transform:uppercase;
    }
    .subtitle-text {
        font-size: clamp(0.9rem, 2.8vw, 1.2rem);
        color: rgba(255,255,255,0.85);
        margin-bottom: 20px;
    }

    .game-grid {
        width: 95%;
        max-width: 1200px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 20px;
        margin-bottom: 50px;
    }

    .game-card {
        background: rgba(142, 36, 170, 0.18);
        border-radius: 15px;
        min-height: 150px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
        font-weight: 700;
        font-size: 1rem;
        backdrop-filter: blur(4px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        transition: all 0.28s cubic-bezier(.2,.9,.2,1);
        cursor: pointer;
        box-shadow: 0 6px 18px rgba(0,0,0,.35);
        padding: 12px;
        text-align:center;
    }
    .game-card:hover {
        transform: translateY(-8px) scale(1.03);
        background: linear-gradient(135deg, rgba(186,104,200,0.22), rgba(142,36,170,0.28));
        box-shadow: 0 18px 40px rgba(0,0,0,0.45), 0 0 22px rgba(142,36,170,0.08);
        border-color: rgba(255,255,255,0.12);
    }
    .game-icon { font-size: 2.2rem; margin-bottom: 10px; transition: transform .25s ease; }
    .game-card:hover .game-icon { transform: scale(1.18) rotate(6deg); }

    .game-page {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: linear-gradient(135deg, #1c1c1c 0%, #4a148c 100%);
        display: none;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        overflow-y: auto;
        z-index: 1000;
    }

    .game-controls { display:flex; gap:12px; margin:18px 0; }
    .control-button {
        padding: 10px 18px;
        border-radius: 10px;
        font-weight:700;
        cursor:pointer;
        color:white;
        border:none;
        background:linear-gradient(45deg,#7b1fa2,#ab47bc);
        box-shadow: 0 4px #5c007a;
    }
    .btn-exit { background:linear-gradient(45deg,#c0392b,#e74c3c); box-shadow:0 4px #a00000; }

    .game-content {
        width: 95%;
        max-width: 760px;
        background: rgba(255,255,255,0.95);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.25);
        color:#222;
        min-height: 220px;
    }
    .game-title { font-size: clamp(1.4rem, 4.5vw, 2rem); font-weight:800; text-align:center; color:var(--deep-purple); margin-bottom:12px; }
    .status-text { text-align:center; font-size:clamp(0.95rem, 3vw, 1.15rem); margin:10px 0; color:#7b1fa2; font-weight:700; }

    .game-button {
        padding: 10px 20px;
        background: linear-gradient(45deg, #7b1fa2, #ab47bc);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        margin:6px;
        box-shadow: 0 4px #5c007a;
    }

    .rps-choice { font-size: 3.5rem; cursor:pointer; padding:12px; border-radius:12px; width:96px; height:96px; display:flex; align-items:center; justify-content:center; border:3px solid #7b1fa2; transition:transform .12s ease; }
    .rps-choice:hover { transform:scale(1.06); }

    .clicker-display { font-size:4rem; font-weight:800; text-align:center; color:#7b1fa2; margin:20px 0; padding:12px; border-radius:12px; border:4px dashed #ab47bc; }
    .coin-display { font-size:4rem; text-align:center; margin:20px 0; transition:transform .5s ease-out; }
    .coin-display.flipping { animation: flip 0.7s infinite; }
    @keyframes flip {
        0% { transform: scale(1) rotateY(0deg); }
        50% { transform: scale(0.85) rotateY(180deg); color:#fff; }
        100% { transform: scale(1) rotateY(360deg); }
    }

    .whack-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; width:clamp(250px,65vw,320px); margin:0 auto; }
    .whack-hole { background:#333; height:80px; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:2rem; cursor:pointer; transition:all .18s; color:#fff; }
    .whack-hole.active { background:linear-gradient(45deg,#ab47bc,#7b1fa2); transform:scale(1.03); box-shadow: 0 6px 20px rgba(0,0,0,0.35); }

    .memory-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; width:clamp(250px,65vw,360px); margin:0 auto; }
    .memory-card { cursor:pointer; perspective:1000px; height:64px; }
    .card-face { width:100%; height:100%; border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:1.4rem; }
    .card-back { background:#7b1fa2; color:white; border:2px solid #5c007a; }
    .card-front { background:#eee; border:2px solid #5c007a; transform: rotateY(180deg); }
    .memory-card-inner { position:relative; width:100%; height:100%; transform-style:preserve-3d; transition:transform .6s; }
    .memory-card.flipped .memory-card-inner { transform: rotateY(180deg); }
    .memory-card .card-face{ backface-visibility:hidden; position:absolute; top:0; left:0; }
    .memory-card .card-front{ transform: rotateY(180deg); }

    .ttt-grid { display:grid; grid-template-columns:repeat(3,1fr); width:clamp(240px,60vw,320px); height:clamp(240px,60vw,320px); gap:6px; margin: 10px auto; }
    .ttt-cell { display:flex; align-items:center; justify-content:center; font-size:2.2rem; border-radius:8px; background: #fff; border:2px solid #ab47bc; cursor:pointer; transition:transform .12s; }
    .ttt-cell:hover{ transform:scale(1.02); }

    .footer { width:100%; text-align:center; padding:22px 0; margin-top:auto; color:rgba(255,255,255,0.75); font-size:0.95rem; }
    .credit-line { font-weight:800; color:#ffccff; margin-bottom:6px; font-size:1.05rem; }

    .dot { position:absolute; width:40px; height:40px; background-color:#e74c3c; border-radius:50%; cursor:pointer; transition:all .18s ease-out; box-shadow:0 0 14px rgba(231,76,60,.85); display:flex; align-items:center; justify-content:center; color:white; font-weight:700; }

    /* responsive tweaks */
    @media (max-width:520px){
        .game-card{ min-height:120px; padding:10px; }
        .game-icon{ font-size:1.8rem; }
        .intro-title{ font-size:1.8rem; }
    }

</style>
</head>
<body>

    <!-- Intro overlay -->
    <div id="introOverlay" class="intro-overlay" aria-hidden="true">
        <div class="intro-center">
            <div id="introTitle" class="intro-title glow">Welcome to GameHub</div>
            <div id="introSub" class="intro-sub">A Collaboration by Zarnab, Azhaan &amp; Arham</div>
        </div>
    </div>

    <!-- Main content -->
    <div id="mainPage" class="main-page" aria-hidden="true" style="opacity:0;">
        <div class="welcome-text">Game Hub</div>
        <div class="subtitle-text">Choose Your Adventure</div>

        <div class="game-grid" id="gameGrid">
            <div class="game-card" data-game="snake"><i class="game-icon fas fa-gamepad"></i><div>Snake Classic</div></div>
            <div class="game-card" data-game="tictactoe"><i class="game-icon fas fa-times-circle"></i><div>Tic-Tac-Toe</div></div>
            <div class="game-card" data-game="whack"><i class="game-icon fas fa-square"></i><div>Whack-a-Block</div></div>
            <div class="game-card" data-game="guess"><i class="game-icon fas fa-question-circle"></i><div>Guess The Number</div></div>
            <div class="game-card" data-game="clicker"><i class="game-icon fas fa-hand-pointer"></i><div>Simple Clicker</div></div>
            <div class="game-card" data-game="memory"><i class="game-icon fas fa-brain"></i><div>Memory Match</div></div>
            <div class="game-card" data-game="rps"><i class="game-icon fas fa-hand-rock"></i><div>Rock Paper Scissors</div></div>
            <div class="game-card" data-game="catch"><i class="game-icon fas fa-bullseye"></i><div>Catch the Dot</div></div>
            <div class="game-card" data-game="dice"><i class="game-icon fas fa-dice-d6"></i><div>Dice Roll</div></div>
            <div class="game-card" data-game="coinflip"><i class="game-icon fas fa-coins"></i><div>Coin Flip</div></div>
        </div>

        <div class="footer">
            <div class="credit-line">A Collaboration by Zarnab, Azhaan &amp; Arham.</div>
            &copy; 2024 Game Hub. All copyrights are strictly reserved.
        </div>
    </div>

    <!-- Game page -->
    <div id="gamePage" class="game-page" aria-hidden="true">
        <div class="game-controls">
            <button id="btnFullscreen" class="control-button btn-fullscreen"><i class="fas fa-expand"></i> Full Screen</button>
            <button id="btnExit" class="control-button btn-exit"><i class="fas fa-arrow-left"></i> Exit Game</button>
        </div>
        <div id="gameContent" class="game-content"></div>
    </div>

<script>
/* ---------- Intro overlay choreography ---------- */
/*
  Timeline (approx):
    0.0s - 0.6s  : intro title fades/scales in
    0.6s - 2.6s  : hold title visible
    2.6s - 3.2s  : title fade out
    3.0s - 3.6s  : subtitle slides up & fades in
    3.6s - 5.6s  : hold subtitle
    5.6s - 6.2s  : subtitle fades out
    6.2s - 6.8s  : overlay fades away; main content reveals
*/
(function(){
    const overlay = document.getElementById('introOverlay');
    const title = document.getElementById('introTitle');
    const sub = document.getElementById('introSub');
    const mainPage = document.getElementById('mainPage');

    // helper to apply CSS transitions+classes
    function animateIn(el, opts = {}) {
        el.style.transition = `all ${opts.duration || 600}ms ${opts.easing || 'cubic-bezier(.2,.9,.2,1)'}`;
        if (opts.to) Object.keys(opts.to).forEach(k => el.style[k] = opts.to[k]);
        if (opts.from) Object.keys(opts.from).forEach(k => el.style[k] = opts.from[k]);
    }

    // initial states
    title.style.opacity = '0';
    title.style.transform = 'scale(.96)';
    title.style.transition = 'none';
    sub.style.opacity = '0';
    sub.style.transform = 'translateY(18px)';
    sub.style.transition = 'none';

    // timeline using timeouts
    setTimeout(() => {
        // title in
        animateIn(title, { duration: 650, to: { opacity:'1', transform:'scale(1) translateY(0)' } });
    }, 80);

    setTimeout(() => {
        // title out
        animateIn(title, { duration: 600, to: { opacity:'0', transform:'scale(.98) translateY(-6px)' } });
    }, 2600);

    setTimeout(() => {
        // sub in
        animateIn(sub, { duration: 600, to: { opacity:'1', transform:'translateY(0)' } });
    }, 3000);

    setTimeout(() => {
        // sub out
        animateIn(sub, { duration: 600, to: { opacity:'0', transform:'translateY(-6px)' } });
    }, 5600);

    setTimeout(() => {
        // overlay fade away to reveal main page
        overlay.classList.add('intro-hidden');
        // reveal main
        mainPage.style.transition = 'opacity 700ms ease';
        mainPage.style.opacity = '1';
        mainPage.setAttribute('aria-hidden','false');
        overlay.setAttribute('aria-hidden','true');
    }, 6200);
})();

/* ---------- App core: games and UI ---------- */

const mainPage = document.getElementById('mainPage');
const gamePage = document.getElementById('gamePage');
const gameContent = document.getElementById('gameContent');
const gameGrid = document.getElementById('gameGrid');
const btnExit = document.getElementById('btnExit');
const btnFullscreen = document.getElementById('btnFullscreen');

let currentGame = null;
let snakeInterval = null;
let whackInterval = null;
let memoryTimeout = null;
let dotTimeout = null;
let diceInterval = null;
let coinInterval = null;
let whackTimer = null;
let catchTimer = null;
let catchTimeLimit = 15;
let catchGameActive = false;

/* Utility: clear all running timers/intervals */
function clearAllTimers(){
    if (snakeInterval) { clearInterval(snakeInterval); snakeInterval = null; }
    if (whackInterval) { clearInterval(whackInterval); whackInterval = null; }
    if (memoryTimeout) { clearTimeout(memoryTimeout); memoryTimeout = null; }
    if (dotTimeout) { clearTimeout(dotTimeout); dotTimeout = null; }
    if (diceInterval) { clearInterval(diceInterval); diceInterval = null; }
    if (coinInterval) { clearInterval(coinInterval); coinInterval = null; }
    if (whackTimer) { clearInterval(whackTimer); whackTimer = null; }
    if (catchTimer) { clearInterval(catchTimer); catchTimer = null; }
}

/* Launch game from tile click */
gameGrid.addEventListener('click', (e) => {
    const card = e.target.closest('.game-card');
    if (!card) return;
    const game = card.dataset.game;
    if (game) launchGame(game);
});

btnExit.addEventListener('click', exitGame);
btnFullscreen.addEventListener('click', toggleFullscreen);

function launchGame(gameType) {
    currentGame = gameType;
    clearAllTimers();
    mainPage.style.display = 'none';
    gamePage.style.display = 'flex';
    gamePage.setAttribute('aria-hidden','false');
    document.onkeydown = null;
    gameContent.innerHTML = '';

    switch(gameType) {
        case 'snake': initSnake(); break;
        case 'tictactoe': initTicTacToe(); break;
        case 'whack': initWhack(); break;
        case 'guess': initGuess(); break;
        case 'clicker': initClicker(); break;
        case 'memory': initMemoryMatch(); break;
        case 'rps': initRockPaperScissors(); break;
        case 'catch': initCatchTheDot(); break;
        case 'dice': initDiceRoll(); break;
        case 'coinflip': initCoinFlip(); break;
        default:
            gameContent.innerHTML = '<div class="game-title">Unknown Game</div>';
    }
}

function exitGame() {
    clearAllTimers();
    gamePage.style.display = 'none';
    gamePage.setAttribute('aria-hidden','true');
    mainPage.style.display = 'flex';
    mainPage.setAttribute('aria-hidden','false');
    gameContent.innerHTML = '';
    document.onkeydown = null;
    if (document.fullscreenElement) document.exitFullscreen().catch(()=>{});
}

function toggleFullscreen() {
    if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(()=>{});
    } else {
        document.exitFullscreen().catch(()=>{});
    }
}

/* ---------- Snake ---------- */
let snake, food, dx, dy, score, gameRunning;
function initSnake() {
    gameContent.innerHTML = `
        <div class="game-title">Snake Classic</div>
        <div class="status-text">Score: <span id="snakeScore">0</span></div>
        <canvas id="snakeCanvas" width="300" height="300" style="border: 2px solid #ab47bc; max-width:100%;"></canvas>
        <div style="text-align:center; margin-top:12px;">
            <button class="game-button" id="startSnakeBtn">Start Game</button>
            <button class="game-button" id="stopSnakeBtn">Stop</button>
        </div>
        <div style="text-align:center; color:#666; margin-top:8px;">Use Arrow Keys to move</div>
    `;
    document.getElementById('startSnakeBtn').addEventListener('click', startSnake);
    document.getElementById('stopSnakeBtn').addEventListener('click', ()=>{ gameRunning=false; if (snakeInterval) clearInterval(snakeInterval); });
    document.onkeydown = function(e) {
        if (currentGame === 'snake' && gameRunning) {
            if (e.key === 'ArrowUp' && dy === 0) { dx = 0; dy = -1; }
            else if (e.key === 'ArrowDown' && dy === 0) { dx = 0; dy = 1; }
            else if (e.key === 'ArrowLeft' && dx === 0) { dx = -1; dy = 0; }
            else if (e.key === 'ArrowRight' && dx === 0) { dx = 1; dy = 0; }
        }
    };
}
function startSnake() {
    const canvas = document.getElementById('snakeCanvas');
    const ctx = canvas.getContext('2d');
    const gridSize = 15;
    const tileCount = Math.floor(canvas.width / gridSize);

    snake = [{x: 10, y: 10}];
    dx = 1; dy = 0; score = 0; gameRunning = true;

    function placeFood(){
        let newFood;
        do{
            newFood = { x: Math.floor(Math.random()*tileCount), y: Math.floor(Math.random()*tileCount) };
        } while (snake.some(s => s.x===newFood.x && s.y===newFood.y));
        food = newFood;
    }
    placeFood();
    document.getElementById('snakeScore').textContent = score;
    if (snakeInterval) clearInterval(snakeInterval);

    function step(){
        if (!gameRunning || (dx === 0 && dy === 0)) return;
        const head = { x: snake[0].x + dx, y: snake[0].y + dy };
        // collision
        if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount || snake.some(s => s.x===head.x && s.y===head.y)){
            gameRunning=false;
            clearInterval(snakeInterval);
            alert('Game Over! Score: '+score);
            return;
        }
        snake.unshift(head);
        if (head.x === food.x && head.y === food.y){
            score++; document.getElementById('snakeScore').textContent = score;
            placeFood();
        } else {
            snake.pop();
        }
        // draw
        ctx.fillStyle = '#f0f0f0';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = '#e74c3c';
        ctx.fillRect(food.x*gridSize, food.y*gridSize, gridSize-1, gridSize-1);
        snake.forEach((seg,i)=>{
            ctx.fillStyle = i===0 ? '#4a148c' : '#7b1fa2';
            ctx.fillRect(seg.x*gridSize, seg.y*gridSize, gridSize-1, gridSize-1);
        });
    }

    drawSnakeAndFood(); // initial draw
    snakeInterval = setInterval(step, 140);

    function drawSnakeAndFood(){
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#f0f0f0'; ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = '#e74c3c'; ctx.fillRect(food.x*gridSize, food.y*gridSize, gridSize-1, gridSize-1);
        snake.forEach((seg,i)=>{ ctx.fillStyle = i===0 ? '#4a148c' : '#7b1fa2'; ctx.fillRect(seg.x*gridSize, seg.y*gridSize, gridSize-1, gridSize-1); });
    }
}

/* ---------- Tic Tac Toe ---------- */
let tttBoard, tttPlayer, tttGameOver;
function initTicTacToe(){
    tttBoard = Array(9).fill('');
    tttPlayer = 'X';
    tttGameOver = false;
    gameContent.innerHTML = `
        <div class="game-title">Tic-Tac-Toe</div>
        <div class="status-text" id="tttStatus">Current Player: X</div>
        <div id="tttGrid" class="ttt-grid"></div>
        <div style="text-align:center; margin-top:10px;">
            <button class="game-button" id="resetTtt">Reset Game</button>
        </div>
    `;
    const grid = document.getElementById('tttGrid');
    grid.innerHTML = '';
    for(let i=0;i<9;i++){
        const cell = document.createElement('div');
        cell.className='ttt-cell';
        cell.dataset.index=i;
        cell.addEventListener('click', ()=> tttMove(i));
        grid.appendChild(cell);
    }
    document.getElementById('resetTtt').addEventListener('click', initTicTacToe);
}
function tttMove(index){
    if (tttGameOver || tttBoard[index] !== '') return;
    tttBoard[index] = tttPlayer;
    const cells = document.querySelectorAll('.ttt-cell');
    cells[index].textContent = tttPlayer;
    const winner = checkTttWinner();
    const status = document.getElementById('tttStatus');
    if (winner === 'Draw') {
        status.textContent = "It's a Draw!";
        tttGameOver = true;
    } else if (winner) {
        status.textContent = `Player ${winner} Wins!`;
        tttGameOver = true;
        const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
        for (let line of lines) {
            const [a,b,c] = line;
            if (tttBoard[a] && tttBoard[a] === tttBoard[b] && tttBoard[a] === tttBoard[c]) {
                cells[a].style.backgroundColor = cells[b].style.backgroundColor = cells[c].style.backgroundColor = '#e74c3c';
                cells[a].style.color = cells[b].style.color = cells[c].style.color = 'white';
                break;
            }
        }
    } else {
        tttPlayer = tttPlayer === 'X' ? 'O' : 'X';
        status.textContent = `Current Player: ${tttPlayer}`;
    }
}
function checkTttWinner(){
    const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
    for(let line of lines){
        const [a,b,c] = line;
        if (tttBoard[a] && tttBoard[a]===tttBoard[b] && tttBoard[a]===tttBoard[c]) return tttBoard[a];
    }
    if (tttBoard.every(cell=>cell!=='')) return 'Draw';
    return null;
}

/* ---------- Whack-a-Block ---------- */
let whackScore, whackTime, whackActive;
function initWhack(){
    whackScore = 0; whackTime = 30; whackActive = null;
    gameContent.innerHTML = `
        <div class="game-title">Whack-a-Block</div>
        <div class="status-text">Score: <span id="whackScore">0</span> | Time: <span id="whackTime">30</span>s</div>
        <div id="whackGrid" class="whack-grid"></div>
        <div style="text-align:center; margin-top:12px;">
            <button class="game-button" id="startWhack">Start Game</button>
            <button class="game-button" id="stopWhack">Stop</button>
        </div>
    `;
    const grid = document.getElementById('whackGrid');
    grid.innerHTML = '';
    for(let i=0;i<9;i++){
        const hole = document.createElement('div');
        hole.className='whack-hole';
        hole.dataset.index = i;
        grid.appendChild(hole);
    }
    grid.addEventListener('click', (e)=>{
        const hole = e.target.closest('.whack-hole');
        if (!hole) return;
        const idx = Number(hole.dataset.index);
        whackHit(idx);
    });
    document.getElementById('startWhack').addEventListener('click', startWhack);
    document.getElementById('stopWhack').addEventListener('click', ()=>{ clearInterval(whackInterval); clearInterval(whackTimer); });
}
function startWhack(){
    if (whackTimer) clearInterval(whackTimer);
    if (whackInterval) clearInterval(whackInterval);
    whackScore=0; whackTime=30; whackActive=null;
    document.getElementById('whackScore').textContent=whackScore;
    document.getElementById('whackTime').textContent=whackTime;
    const grid = document.getElementById('whackGrid');
    grid.style.pointerEvents='auto';

    whackTimer = setInterval(()=>{
        whackTime--;
        document.getElementById('whackTime').textContent=whackTime;
        if (whackTime<=0){
            clearInterval(whackTimer); clearInterval(whackInterval);
            alert("Game Over! Final Score: "+whackScore);
            document.getElementById('whackGrid').style.pointerEvents='none';
            document.querySelectorAll('.whack-hole').forEach(h=>{ h.classList.remove('active'); h.textContent=''; });
        }
    },1000);

    whackInterval = setInterval(()=>{
        const holes = document.querySelectorAll('.whack-hole');
        if (whackActive !== null && holes[whackActive]) { holes[whackActive].classList.remove('active'); holes[whackActive].textContent=''; }
        whackActive = Math.floor(Math.random()*9);
        const h = holes[whackActive];
        if (h){
            h.classList.add('active');
            h.textContent = 'üéØ';
        }
    }, 700);
}
function whackHit(index){
    const holes = document.querySelectorAll('.whack-hole');
    if (index === whackActive && whackTime>0){
        whackScore++;
        document.getElementById('whackScore').textContent=whackScore;
        const hole = holes[index];
        if (hole){
            hole.classList.remove('active');
            hole.textContent = 'üí•';
        }
        whackActive = null;
        // restart interval so it doesn't immediately set same hole
        if (whackInterval) clearInterval(whackInterval);
        whackInterval = setInterval(()=>{
            const currentHoles = document.querySelectorAll('.whack-hole');
            if (whackActive !== null && currentHoles[whackActive]) { currentHoles[whackActive].classList.remove('active'); currentHoles[whackActive].textContent=''; }
            whackActive = Math.floor(Math.random()*9);
            if (currentHoles[whackActive]) { currentHoles[whackActive].classList.add('active'); currentHoles[whackActive].textContent='üéØ'; }
        }, 700);
    }
}

/* ---------- Guess the Number ---------- */let guessTarget, guessAttempts;
function initGuess(){
    guessTarget = Math.floor(Math.random()*100)+1;
    guessAttempts = 0;
    gameContent.innerHTML = `
        <div class="game-title">Guess The Number</div>
        <div class="status-text" id="guessStatus">Guess a number between 1 and 100.</div>
        <div style="text-align:center; margin:10px 0;">
            <input id="guessInput" type="number" min="1" max="100" placeholder="?" style="padding:8px;border-radius:8px;border:1px solid #ddd;width:120px;text-align:center;">
        </div>
        <div style="text-align:center;">
            <button class="game-button" id="guessBtn">Guess</button>
            <button class="game-button" id="resetGuess">Reset</button>
        </div>
        <div style="text-align:center;color:#666;margin-top:10px;">Attempts: <span id="guessAttempts">0</span></div>
    `;
    document.getElementById('guessBtn').addEventListener('click', makeGuess);
    document.getElementById('resetGuess').addEventListener('click', initGuess);
}
function makeGuess(){
    const input = document.getElementById('guessInput');
    const status = document.getElementById('guessStatus');
    const attemptsEl = document.getElementById('guessAttempts');
    const val = parseInt(input.value);
    if (isNaN(val) || val < 1 || val > 100){ status.textContent = "Please enter a valid number between 1 and 100."; return; }
    guessAttempts++; attemptsEl.textContent = guessAttempts;
    if (val === guessTarget){
        status.textContent = `You Got It! The number was ${guessTarget}! It took you ${guessAttempts} attempts.`;
        input.disabled = true;
    } else if (val < guessTarget) {
        status.textContent = "Too Low! Try a higher number.";
    } else {
        status.textContent = "Too High! Try a lower number.";
    }
    input.value='';
    input.focus();
}

/* ---------- Clicker ---------- */
let clickerCount;
function initClicker(){
    clickerCount = 0;
    gameContent.innerHTML = `
        <div class="game-title">Simple Clicker</div>
        <div class="clicker-display" id="clickerCount">0</div>
        <div style="text-align:center; margin-top:10px;">
            <button class="game-button clicker-button" id="clickMe">Click Me!</button>
            <button class="game-button" id="resetClicker">Reset</button>
        </div>
    `;
    document.getElementById('clickMe').addEventListener('click', incrementClicker);
    document.getElementById('resetClicker').addEventListener('click', initClicker);
}
function incrementClicker(){ clickerCount++; document.getElementById('clickerCount').textContent = clickerCount; }

/* ---------- Memory Match ---------- */
const memoryIcons = ['üçé','üçå','üçá','üçì','ü•ù','üçâ','üçã','üçä'];
let memoryBoard, flippedCards = [], matchesFound, memoryGameActive = true;
function initMemoryMatch(){
    let cards = memoryIcons.concat(memoryIcons);
    for (let i = cards.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [cards[i],cards[j]] = [cards[j],cards[i]];
    }
    memoryBoard = cards;
    flippedCards = [];
    matchesFound = 0;
    memoryGameActive = true;

    gameContent.innerHTML = `
        <div class="game-title">Memory Match</div>
        <div class="status-text" id="memoryStatus">Find all the pairs!</div>
        <div id="memoryGrid" class="memory-grid"></div>
        <div style="text-align:center; margin-top:10px;">
            <button class="game-button" id="resetMemory">Reset Game</button>
        </div>
    `;
    const grid = document.getElementById('memoryGrid');
    grid.innerHTML = '';
    memoryBoard.forEach((icon, index)=>{
        const card = document.createElement('div');
        card.className = 'memory-card';
        card.dataset.index = index;
        const inner = document.createElement('div'); inner.className='memory-card-inner';
        inner.innerHTML = `<div class="card-face card-back"><i class="fas fa-question"></i></div><div class="card-face card-front">${icon}</div>`;
        card.appendChild(inner);
        card.addEventListener('click', ()=> flipCard(card, icon));
        grid.appendChild(card);
    });
    document.getElementById('resetMemory').addEventListener('click', initMemoryMatch);
}
function flipCard(card, icon){
    if (!memoryGameActive || card.classList.contains('flipped') || card.classList.contains('matched') || flippedCards.length>=2) return;
    card.classList.add('flipped');
    flippedCards.push({card, icon});
    if (flippedCards.length===2){
        memoryGameActive=false;
        const [c1, c2] = flippedCards;
        if (c1.icon === c2.icon){
            setTimeout(()=> {
                c1.card.classList.add('matched'); c2.card.classList.add('matched');
                matchesFound++; flippedCards=[]; memoryGameActive=true;
                if (matchesFound === memoryIcons.length) alert('üéâ You Matched Them All! üéâ');
            }, 500);
        } else {
            memoryTimeout = setTimeout(()=>{
                c1.card.classList.remove('flipped'); c2.card.classList.remove('flipped');
                flippedCards=[]; memoryGameActive=true;
            }, 900);
        }
    }
}

/* ---------- Rock Paper Scissors ---------- */
let rpsScore = {win:0,loss:0,draw:0};
const rpsOptions = ['rock','paper','scissors'];
const rpsIcons = { rock:'‚úä', paper:'‚úã', scissors:'‚úåÔ∏è' };
function initRockPaperScissors(){
    rpsScore = {win:0,loss:0,draw:0};
    gameContent.innerHTML = `
        <div class="game-title">Rock Paper Scissors</div>
        <div class="status-text" id="rpsScoreDisplay">Wins: 0 | Losses: 0 | Draws: 0</div>
        <div class="rps-options" id="rpsOptions" style="display:flex; gap:16px; justify-content:center; margin:12px 0;">
            <div class="rps-choice" data-choice="rock">${rpsIcons.rock}</div>
            <div class="rps-choice" data-choice="paper">${rpsIcons.paper}</div>
            <div class="rps-choice" data-choice="scissors">${rpsIcons.scissors}</div>
        </div>
        <div class="status-text" id="rpsResult">Make your choice!</div>
        <div style="text-align:center; margin-top:8px;"><button class="game-button" id="resetRps">Reset Score</button></div>
    `;
    document.getElementById('rpsOptions').addEventListener('click', (e)=>{
        const choice = e.target.closest('.rps-choice');
        if (!choice) return;
        playRPS(choice.dataset.choice);
    });
    document.getElementById('resetRps').addEventListener('click', initRockPaperScissors);
}
function playRPS(playerChoice){
    const computerChoice = rpsOptions[Math.floor(Math.random()*rpsOptions.length)];
    let result = '';
    if (playerChoice === computerChoice) result='Draw';
    else if ((playerChoice==='rock' && computerChoice==='scissors') || (playerChoice==='paper' && computerChoice==='rock') || (playerChoice==='scissors' && computerChoice==='paper')) result='Win';
    else result='Loss';
    if (result==='Win') rpsScore.win++; else if (result==='Loss') rpsScore.loss++; else rpsScore.draw++;
    document.getElementById('rpsResult').textContent = `You chose ${rpsIcons[playerChoice]}. Computer chose ${rpsIcons[computerChoice]}. Result: ${result}!`;
    document.getElementById('rpsScoreDisplay').textContent = `Wins: ${rpsScore.win} | Losses: ${rpsScore.loss} | Draws: ${rpsScore.draw}`;
}

/* ---------- Catch the Dot ---------- */
let catchScore = 0;
function initCatchTheDot(){
    catchScore = 0; catchGameActive = false;
    gameContent.innerHTML = `
        <div class="game-title">Catch the Dot</div>
        <div class="status-text">Score: <span id="catchScore">0</span> | Time: <span id="catchTime">0</span>s</div>
        <div id="dotArea" style="width:100%; height:300px; border:3px solid #7b1fa2; border-radius:10px; position:relative; background:#f0f0f0; margin:14px 0; overflow:hidden;"></div>
        <div style="text-align:center;"><button class="game-button" id="startCatch">Start 15s Game</button></div>
    `;
    document.getElementById('startCatch').addEventListener('click', startCatchGame);
}
function startCatchGame(){
    if (catchTimer) clearInterval(catchTimer);
    if (dotTimeout) clearTimeout(dotTimeout);
    catchScore = 0; catchGameActive = true;
    let time = catchTimeLimit;
    document.getElementById('catchScore').textContent = catchScore;
    document.getElementById('startCatch').disabled = true;
    catchTimer = setInterval(()=>{
        document.getElementById('catchTime').textContent = time;
        time--;
        if (time < 0){
            clearInterval(catchTimer); catchGameActive=false;
            document.getElementById('dotArea').innerHTML='';
            document.getElementById('startCatch').disabled=false;
            alert("Time's Up! Final Score: "+catchScore);
            document.getElementById('catchTime').textContent=0;
        }
    },1000);
    placeNewDot();
}
function placeNewDot(){
    if (!catchGameActive) return;
    const area = document.getElementById('dotArea');
    area.innerHTML='';
    const dot = document.createElement('div');
    dot.className='dot';
    dot.textContent = '';
    dot.addEventListener('click', ()=> dotHit(dot));

    const areaWidth = area.clientWidth;
    const areaHeight = area.clientHeight;
    const dotSize = 40;

    const maxX = Math.max(0, areaWidth - dotSize);
    const maxY = Math.max(0, areaHeight - dotSize);

    // choose random position
    dot.style.left = Math.round(Math.random() * maxX) + 'px';
    dot.style.top = Math.round(Math.random() * maxY) + 'px';

    area.appendChild(dot);

    if (dotTimeout) clearTimeout(dotTimeout);
    dotTimeout = setTimeout(()=>{
        if (dot.parentNode) dot.parentNode.removeChild(dot);
        placeNewDot();
    }, 1500);
}
function dotHit(dotElement){
    if (!catchGameActive) return;
    catchScore++;
    document.getElementById('catchScore').textContent = catchScore;
    if (dotElement.parentNode) dotElement.parentNode.removeChild(dotElement);
    if (dotTimeout) clearTimeout(dotTimeout);
    placeNewDot();
}

/* ---------- Dice ---------- */
const diceFaces = ['‚öÄ','‚öÅ','‚öÇ','‚öÉ','‚öÑ','‚öÖ'];
function initDiceRoll(){
    gameContent.innerHTML = `
        <div class="game-title">Dice Roll Simulator</div>
        <div class="coin-display" id="diceDisplay" style="height:auto;margin-top:24px;">?</div>
        <div style="text-align:center; margin-top:10px;">
            <button class="game-button" id="rollDiceBtn">Roll Dice!</button>
        </div>
        <div class="status-text" id="diceStatus">Click 'Roll Dice!' to begin.</div>
    `;
    document.getElementById('rollDiceBtn').addEventListener('click', rollDice);
}
function rollDice(){
    if (diceInterval) clearInterval(diceInterval);
    const display = document.getElementById('diceDisplay');
    const status = document.getElementById('diceStatus');
    display.classList.add('flipping');
    status.textContent = 'Rolling...';
    let rollCount = 0;
    diceInterval = setInterval(()=>{
        const face = diceFaces[Math.floor(Math.random()*6)];
        display.textContent = face;
        rollCount++;
        if (rollCount>15){
            clearInterval(diceInterval);
            display.classList.remove('flipping');
            const result = Math.floor(Math.random()*6)+1;
            display.textContent = diceFaces[result-1];
            status.textContent = `You rolled a ${result}!`;
        }
    },90);
}

/* ---------- Coin Flip ---------- */
const coinFaces = {0:'HEADS',1:'TAILS'};
const coinEmojis = {0:'üí∞',1:'ü™ô'};
function initCoinFlip(){
    gameContent.innerHTML = `
        <div class="game-title">Coin Flip</div>
        <div class="status-text" id="coinStatus">Choose Heads or Tails!</div>
        <div class="coin-display" id="coinDisplay"></div>
        <div style="text-align:center; margin-top:10px;">
            <button class="game-button" id="headsBtn">Heads</button>
            <button class="game-button" id="tailsBtn">Tails</button>
        </div>
        <div class="status-text" id="coinResult"></div>
    `;
    document.getElementById('coinDisplay').textContent = coinEmojis[0];document.getElementById('headsBtn').addEventListener('click', ()=> startCoinFlip(0));
    document.getElementById('tailsBtn').addEventListener('click', ()=> startCoinFlip(1));
}
function startCoinFlip(playerChoice){
    if (coinInterval) clearInterval(coinInterval);
    const display = document.getElementById('coinDisplay');
    const status = document.getElementById('coinStatus');
    const resultEl = document.getElementById('coinResult');
    status.textContent = 'Flipping...'; resultEl.textContent = '';
    display.classList.add('flipping');
    let flips = 0;
    coinInterval = setInterval(()=>{
        const face = Math.floor(Math.random()*2);
        display.textContent = coinEmojis[face];
        flips++;
        if (flips>20){
            clearInterval(coinInterval);
            display.classList.remove('flipping');
            const finalResult = Math.floor(Math.random()*2);
            display.textContent = coinEmojis[finalResult];
            if (playerChoice === finalResult) status.textContent = `You Win! It was ${coinFaces[finalResult]} ${coinEmojis[finalResult]}!`;
            else status.textContent = `You Lose! It was ${coinFaces[finalResult]} ${coinEmojis[finalResult]}.`;
        }
    },90);
}

/* Make sure main page visible after overlay (in case overlay closed early) */
window.addEventListener('load', ()=>{
    // if intro overlay already hidden, ensure main visible
    setTimeout(()=>{ if (!document.getElementById('introOverlay').classList.contains('intro-hidden')) return; mainPage.style.opacity='1'; }, 7000);
});
</script>
</body>
</html>
